(this.webpackJsonpadmin=this.webpackJsonpadmin||[]).push([[10],{437:function(e,t,a){},455:function(e,t,a){"use strict";a.d(t,"b",(function(){return l})),a.d(t,"c",(function(){return r})),a.d(t,"f",(function(){return o})),a.d(t,"a",(function(){return i})),a.d(t,"d",(function(){return s})),a.d(t,"e",(function(){return c}));var n=a(6);function l(e,t,a,l){return{type:n.p,libType:e,title:t,page:a,pageSize:l}}function r(e){return{type:n.C,formValue:e}}function o(e){return{type:n.M,formValue:e}}function i(e,t){return{type:n.f,id:e,libType:t}}function c(e){return{type:n.I,libType:e}}function s(e){return{type:n.G,info:e}}},500:function(e,t,a){"use strict";a.d(t,"a",(function(){return v}));var n=a(31),l=a(32),r=a(34),o=a(33),i=a(35),c=a(0),s=a.n(c),u=a(595),m=a(852),p=a(862),d=a(403),h=a(54),f=a(62),E=a(872),g=a(851),b=a(18),y=a(12),v=(a(437),function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(o.a)(t).call(this,e))).close=function(){a.props.onClose("image")},a.state={page:1,searchTile:"",upload:!1,loading:!1,selected:""},a}return Object(i.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e,t,a){!e.show&&this.props.show&&this.props.getPicList("image","",0,20)}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement(u.a,{backdrop:!0,show:this.props.show,onHide:this.close,size:"lg"},s.a.createElement(u.a.Header,null,s.a.createElement(u.a.Title,null,s.a.createElement("span",null,"\u56fe\u7247\u7d20\u6750")),s.a.createElement(m.a,null),s.a.createElement(p.a,{className:"upload",onUpload:function(t){e.setState({upload:!0,loading:!0})},onSuccess:function(t,a){200===t.code?(e.props.getPicList("image","",0,20),d.a.success(t.message)):d.a.error(t.message),e.setState({upload:!1,loading:!1})},headers:{Authorization:"Bearer "+Object(b.a)("token")==="undefined"?"":Object(b.a)("token")},action:y.f+y.w,data:{type:"image"},fileListVisible:!1,disabled:this.state.upload},s.a.createElement(h.a,{style:{background:"#4caf50",color:"#ffffff"},loading:this.state.loading},s.a.createElement(f.a,{icon:"plus"})," \u4e0a\u4f20\u56fe\u7247"))),s.a.createElement(u.a.Body,{style:{marginTop:0}},s.a.createElement("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap"}},this.props.picList.map((function(t){return s.a.createElement(E.a,{className:"picItem",key:t.id,style:{border:e.state.selected.id===t.id?"1px solid #4caf50":""}},s.a.createElement("img",{src:t.url,alt:t.name,height:"145",onClick:function(){e.setState({selected:t})}}),s.a.createElement("span",{style:{display:"block",textAlign:"center",overflow:"hidden"}},t.name))})))),s.a.createElement(u.a.Footer,null,s.a.createElement("div",null,this.props.total>0?s.a.createElement(g.a,{activePage:this.state.page,pages:Math.ceil(this.props.total/20),maxButtons:10,ellipsis:!0,onSelect:function(t){var a=e.props.getPicList;e.setState({page:t},(function(){a("image","",t,20)}))}}):""),s.a.createElement(h.a,{onClick:function(){e.props.onSelect(e.state.selected),e.props.clean&&e.setState({selected:!1}),e.close()},appearance:"primary"},"\u786e\u5b9a"),s.a.createElement(h.a,{onClick:this.close,appearance:"subtle"},"\u5173\u95ed"))))}}]),t}(s.a.Component))},871:function(e,t,a){"use strict";a.r(t);var n=a(16),l=a(42),r=a(129),o=a(31),i=a(32),c=a(34),s=a(33),u=a(35),m=a(0),p=a.n(m),d=a(864),h=a(852),f=a(54),E=a(62),g=a(401),b=a(396),y=a(407),v=a(404),w=(a(437),a(752)),C=a.n(w),L=(a(848),a(873)),k=a(201),j=a(874),O=a(859),x=a(867),S=a(500),V=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(s.a)(t).call(this,e))).handleFrom=function(e,t){var n=a.props.formValue;n[e]=t,a.setState({formValue:n}),a.props.onModify(n)},a.handleUpdate=function(){var e=a.props.formValue;e.cover_pic=a.props.selected.media_id,a.props.onUpdate(e)},a.closeLibrary=function(){a.setState({showLib:!1})},a.state={show:!0,formValue:"",showLib:!1},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return p.a.createElement("div",null,p.a.createElement(L.a,{backdrop:!0,show:this.props.show,onHide:this.props.onClose,size:"lg"},p.a.createElement(L.a.Header,null,p.a.createElement(L.a.Title,null,"\u65b0\u589e\u56fe\u6587\u7d20\u6750")),p.a.createElement(L.a.Body,null,p.a.createElement(g.a,{fluid:!0,className:"library-edit"},p.a.createElement(b.a,null,p.a.createElement(y.a,null,"\u6807\u9898"),p.a.createElement(v.a,{name:"title",value:this.props.formValue.title,onChange:function(t){e.handleFrom("title",t)}})),p.a.createElement(b.a,null,p.a.createElement(y.a,null,"\u4f5c\u8005"),p.a.createElement(v.a,{name:"author",value:this.props.formValue.author,onChange:function(t){e.handleFrom("author",t)}})),p.a.createElement(b.a,null,p.a.createElement(y.a,null,"\u6b63\u6587"),p.a.createElement(C.a,{controls:["undo","redo","remove-styles","font-size","bold","italic","underline","strike-through","text-color","text-align","text-indent","letter-spacing","list-ul","table","blockquote","hr","emoji"],style:{border:"1px solid #e5e5ea"},onChange:function(t){e.handleFrom("content",t.toHTML())}})),p.a.createElement(b.a,null,p.a.createElement(y.a,null,"\u5c01\u9762\u548c\u6458\u8981"),p.a.createElement(S.a,{show:this.state.showLib,picList:this.props.picList||[],getPicList:this.props.getPicList,onSelect:this.props.onSelect,total:this.props.total,onClose:this.closeLibrary,clean:!1}),p.a.createElement("div",{className:"cover"},p.a.createElement("span",{onClick:function(){e.setState({showLib:!0})}},0!==this.props.selected.length?p.a.createElement("img",{src:this.props.selected.url,alt:this.props.selected.name,width:134,style:{verticalAlign:"top"}}):p.a.createElement(E.a,{icon:"plus",style:{color:"#e5e5ea",fontSize:"18px"}})),p.a.createElement(k.a,{componentClass:"textarea",rows:6,placeholder:"\u9009\u586b\uff0c\u6458\u8981\u4f1a\u5728\u8ba2\u9605\u53f7\u6d88\u606f\u3001\u8f6c\u53d1\u94fe\u63a5\u7b49\u6587\u7ae0\u5916\u7684\u573a\u666f\u663e\u9732\uff0c\u5e2e\u52a9\u8bfb\u8005\u5feb\u901f\u4e86\u89e3\u5185\u5bb9\uff0c\u5982\u4e0d\u586b\u5199\u5219\u9ed8\u8ba4\u6293\u53d6\u6b63\u6587\u524d54\u5b57",onChange:function(t){e.handleFrom("summary",t)}}))),p.a.createElement(b.a,{className:"form-group-line"},p.a.createElement(y.a,{style:{lineHeight:"30px"}},"\u663e\u793a\u5c01\u9762"),p.a.createElement(j.a,{size:"lg",checkedChildren:"\u663e\u793a",unCheckedChildren:"\u4e0d\u663e\u793a",defaultChecked:"1"===this.props.formValue.show_cover_pic,onChange:function(t){e.handleFrom("show_cover_pic",t?"1":"0")}})),p.a.createElement(b.a,null,p.a.createElement(y.a,null,"\u539f\u6587\u5730\u5740"),p.a.createElement(v.a,{name:"source_url",value:this.props.formValue.source_url,onChange:function(t){e.handleFrom("source_url",t)}})),p.a.createElement(b.a,{className:"form-group-line"},p.a.createElement(y.a,{style:{lineHeight:"36px"}},"\u5f00\u542f\u8bc4\u8bba"),p.a.createElement(O.a,{name:"comment",defaultValue:this.props.formValue.comment||"2",onChange:function(t){e.handleFrom("comment",t)}},p.a.createElement(x.a,{value:"0"},"\u5173\u95ed"),p.a.createElement(x.a,{value:"1"},"\u7c89\u4e1d\u53ef\u8bc4\u8bba"),p.a.createElement(x.a,{value:"2"},"\u6240\u6709\u4eba\u53ef\u8bc4\u8bba"))))),p.a.createElement(L.a.Footer,null,p.a.createElement(f.a,{appearance:"primary",onClick:this.handleUpdate},"\u63d0\u4ea4"),p.a.createElement(f.a,{appearance:"subtle",onClick:this.props.onClose},"\u53d6\u6d88"))))}}]),t}(p.a.Component),T=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(s.a)(t).call(this,e))).add=function(){a.setState({show:!0})},a.close=function(){a.setState({show:!1})},a.state={page:1,searchTile:"",show:!1},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.getList("news","",1,20)}},{key:"render",value:function(){var e=this,t=d.a.Column,a=d.a.HeaderCell,n=d.a.Cell,l=d.a.Pagination;return p.a.createElement("div",{id:"page"},p.a.createElement(V,{show:this.state.show,formValue:this.props.formValue,onEdit:this.props.onUpdate,onClose:this.close,onModify:this.props.onModify,onUpdate:this.props.onUpdate,onSelect:this.props.onSelect,getPicList:this.props.getList,picList:this.props.picList,total:this.props.total,selected:this.props.selected}),p.a.createElement("div",{className:"header"},p.a.createElement("div",null,p.a.createElement(f.a,{color:"orange",onClick:this.add},p.a.createElement(E.a,{icon:"plus"})," \u65b0\u589e\u7d20\u6750"),p.a.createElement(f.a,{color:"green"},p.a.createElement(E.a,{icon:"repeat"})," \u83b7\u53d6\u5df2\u6709\u7d20\u6750")),p.a.createElement(g.a,{layout:"inline"},p.a.createElement(b.a,null,p.a.createElement(y.a,null,"\u6807\u9898"),p.a.createElement(v.a,{name:"title",onChange:function(t){e.setState({searchTitle:t})}})),p.a.createElement(f.a,{className:"form-button",appearance:"primary",onClick:function(){e.props.getList("news","",1,20)}},"\u67e5\u8be2"))),p.a.createElement(h.a,null),p.a.createElement(d.a,{loading:!1,data:this.props.list,style:{marginLeft:25,marginRight:25},autoHeight:!0,rowHeight:80},p.a.createElement(t,{width:50,align:"center",verticalAlign:"middle",fixed:!0},p.a.createElement(a,null,"ID"),p.a.createElement(n,{dataKey:"id"})),p.a.createElement(t,{flexGrow:6,align:"center",verticalAlign:"middle"},p.a.createElement(a,null,"\u6807\u9898"),p.a.createElement(n,{dataKey:"title"})),p.a.createElement(t,{flexGrow:4,align:"center",verticalAlign:"middle"},p.a.createElement(a,null,"\u5c01\u9762"),p.a.createElement((function(e){var t=e.rowData,a=(e.dataKey,Object(r.a)(e,["rowData","dataKey"]));return p.a.createElement(n,a,p.a.createElement("img",{height:54,src:t.cover_pic,alt:t.name}))}),{datakey:"cover_pic"})),p.a.createElement(t,{flexGrow:2,align:"center",verticalAlign:"middle"},p.a.createElement(a,null,"\u662f\u5426\u663e\u793a\u5c01\u9762"),p.a.createElement(n,{dataKey:"show_cover_pic"})),p.a.createElement(t,{flexGrow:3,align:"center",verticalAlign:"middle"},p.a.createElement(a,null,"\u662f\u5426\u5f00\u542f\u8bc4\u8bba"),p.a.createElement(n,{dataKey:"comment"})),p.a.createElement(t,{flexGrow:3,align:"center",verticalAlign:"middle"},p.a.createElement(a,null,"\u521b\u5efa\u65f6\u95f4"),p.a.createElement(n,{dataKey:"created_at"})),p.a.createElement(t,{flexGrow:6,align:"center",verticalAlign:"middle"},p.a.createElement(a,null),p.a.createElement((function(t){var a=t.rowData,l=(t.dataKey,Object(r.a)(t,["rowData","dataKey"]));return p.a.createElement(n,Object.assign({},l,{className:"link-group"}),p.a.createElement("a",{href:a.url,target:"_blank"},"\u67e5\u770b"),p.a.createElement(h.a,{vertical:!0}),p.a.createElement("a",{role:"button",onClick:function(){e.props.onDel(a.id,"image")}},"\u5220\u9664"))}),{dataKey:"id"}))),this.props.total>0?p.a.createElement(l,{activePage:this.state.page,displayLength:20,renderLengthMenu:function(){return""},total:this.props.total,onChangePage:function(t){e.props.getList("image","",1,20),e.setState({page:t})}}):"")}}]),t}(p.a.Component),_=a(455);t.default=Object(n.o)(Object(l.c)((function(e){return{list:e.LibraryImgTxt.list,picList:e.LibraryImgTxt.picList,total:e.LibraryImgTxt.total,selected:e.LibraryImgTxt.info,formValue:e.LibraryImgTxt.formValue}}),(function(e){return{getList:function(t,a,n,l){return e(Object(_.b)(t,a,n,l))},onUpdate:function(t){return e(Object(_.f)(t))},onSelect:function(t){return e(Object(_.d)(t))},onDel:function(t,a){return e(Object(_.a)(t,a))},onModify:function(t){return e(Object(_.c)(t))}}}))(T))}}]);
//# sourceMappingURL=10.bbd34ae4.chunk.js.map