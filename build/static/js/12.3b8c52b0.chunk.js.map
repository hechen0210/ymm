{"version":3,"sources":["component/menu/edit.tsx","component/menu/index.tsx","container/menu/index.tsx","actions/menu.ts"],"names":["Edit","props","handleFrom","name","value","formValue","setState","handleUpdate","id","trim","Alert","error","state","show","Drawer","this","onHide","onClose","size","Header","Title","title","Body","Form","fluid","FormGroup","ControlLabel","FormControl","onChange","e","SelectPicker","data","menu","searchable","block","RadioGroup","inline","type","Radio","Footer","Button","onClick","appearance","React","Component","Brand","add","close","modify","onModify","setTimeout","page","bind","getList","prevProps","prevState","snapshot","update","Column","Table","HeaderCell","Cell","Pagination","color","Icon","icon","Divider","loading","list","style","marginLeft","marginRight","width","align","fixed","dataKey","flexGrow","rowData","className","vertical","href","total","lengthMenu","label","activePage","displayLength","renderTotal","withRouter","connect","Menu","del","dispatch","pageSize","GET_MENU_LIST","getListAction","onUpdate","editType","UPDATE_MENU","updateAction","onDel","DELETE_MENU","deleteAction","MODIFY_MENU","modifyAction"],"mappings":"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","file":"static/js/12.3b8c52b0.chunk.js","sourcesContent":["import React from \"react\";\nimport {\n    Drawer,\n    Button,\n    FormGroup,\n    ControlLabel,\n    FormControl,\n    Form,\n    Alert,\n    RadioGroup,\n    Radio,\n    SelectPicker\n} from \"rsuite\";\n\nexport interface IProps {\n    show: boolean,\n    title: string,\n    formValue: any,\n    onClose: () => void,\n}\n\nexport default class Edit extends React.Component<IProps, any> {\n    constructor(props: Readonly<IProps>) {\n        super(props);\n        this.state = {\n            show: true,\n            formValue: \"\"\n        }\n    }\n\n    handleFrom = (name: string, value: string) => {\n        let formValue = this.props.formValue\n        formValue[name] = value\n        this.setState({\n            formValue: formValue\n        })\n        // this.props.onModify(formValue)\n    }\n\n    handleUpdate = () => {\n        const id = this.props.formValue.id\n        const name = this.props.formValue.name.trim()\n        if (!name) {\n            Alert.error(\"性质名称不能为空\")\n            return false\n        }\n    }\n\n    render() {\n        return (\n            <Drawer\n                show={this.props.show}\n                onHide={this.props.onClose}\n                size=\"xs\"\n            >\n                <Drawer.Header>\n                    <Drawer.Title>{this.props.title}</Drawer.Title>\n                </Drawer.Header>\n                <Drawer.Body>\n                    <Form fluid>\n                        <FormGroup>\n                            <ControlLabel>菜单名称</ControlLabel>\n                            <FormControl name=\"name\" value={this.props.formValue.name} onChange={(e) => {\n                                this.handleFrom(\"name\", e)\n                            }}/>\n                        </FormGroup>\n                        <FormGroup>\n                            <ControlLabel>上级菜单</ControlLabel>\n                            <SelectPicker data={this.props.formValue.menu} searchable={false} block={true}/>\n                        </FormGroup>\n                        <FormGroup>\n                            <ControlLabel>菜单类型</ControlLabel>\n                            <RadioGroup inline value={this.props.formValue.type} onChange={value => {\n                                this.handleFrom(\"type\", value)\n                            }}>\n                                <Radio value=\"click\">发送消息</Radio>\n                                <Radio value=\"view\">跳转网页</Radio>\n                                <Radio value=\"miniprogram\">跳转小程序</Radio>\n                            </RadioGroup>\n                        </FormGroup>\n                        <FormGroup>\n                            <ControlLabel>小程序</ControlLabel>\n                            <FormControl name=\"name\" value={this.props.formValue.name} onChange={(e) => {\n                                this.handleFrom(\"name\", e)\n                            }}/>\n                        </FormGroup>\n                        <FormGroup>\n                            <ControlLabel>跳转地址</ControlLabel>\n                            <FormControl name=\"name\" value={this.props.formValue.name} onChange={(e) => {\n                                this.handleFrom(\"name\", e)\n                            }}/>\n                        </FormGroup>\n                    </Form>\n                </Drawer.Body>\n                <Drawer.Footer>\n                    <Button onClick={this.props.onClose} appearance=\"primary\">提交</Button>\n                    <Button onClick={this.props.onClose} appearance=\"subtle\">取消</Button>\n                </Drawer.Footer>\n            </Drawer>\n        )\n    }\n}","import React from \"react\";\nimport {Button, Divider, Icon, Table} from \"rsuite\";\nimport \"../../sass/menu.scss\"\nimport Edit from \"./edit\";\n\nexport interface IProps {\n    list: any\n    total: number\n    update: boolean\n    formValue: any\n    getList: (page: number, pageSize: number) => void\n    onUpdate: (id: number, name: string, type: string) => void\n    onDel: (id: number, type: string) => void,\n    onModify: (formValue: any) => void,\n}\n\nexport default class Brand extends React.Component<IProps, any> {\n    constructor(props: Readonly<IProps>) {\n        super(props)\n        this.state = {\n            show: true,\n            title: \"添加菜单\",\n            page: 1\n        }\n        this.add = this.add.bind(this)\n    }\n\n    componentDidMount(): void {\n        this.props.getList(0, 20)\n    }\n\n    componentDidUpdate(prevProps: Readonly<IProps>, prevState: Readonly<any>, snapshot?: any): void {\n        if (!prevProps.update && this.props.update) {\n            this.close()\n        }\n    }\n\n    add = () => {\n        this.setState({\n            show: true,\n        })\n    }\n\n    close = () => {\n        let modify = this.props.onModify\n        this.setState({\n            show: false\n        }, function () {\n            setTimeout(function () {\n                modify({\"id\": 0, \"name\": \"\"})\n            }, 500)\n        })\n    }\n\n    render() {\n        const {Column, HeaderCell, Cell, Pagination} = Table;\n        const ActionCell = ({rowData, dataKey, ...props}: any) => {\n            return (\n                <Cell {...props} className=\"link-group\">\n                    <a>编辑</a>\n                    <Divider vertical/>\n                    <a href=\"\">删除</a>\n                </Cell>\n            );\n        };\n        return (\n            <div id=\"page\">\n                <Edit show={this.state.show} onClose={this.close} title={this.state.title}\n                      formValue={this.props.formValue}/>\n                <Button color=\"orange\" onClick={this.add}>\n                    <Icon icon=\"plus\"/> 新增菜单\n                </Button>\n                <Button color=\"red\" onClick={this.add}>\n                    <Icon icon=\"upload\"/> 更新菜单\n                </Button>\n                <Divider/>\n                <Table loading={false} data={this.props.list} style={{marginLeft: 25, marginRight: 25}}>\n                    <Column width={50} align=\"center\" fixed>\n                        <HeaderCell>ID</HeaderCell>\n                        <Cell dataKey=\"id\"/>\n                    </Column>\n                    <Column flexGrow={5}>\n                        <HeaderCell>菜单名称</HeaderCell>\n                        <Cell dataKey=\"name\"/>\n                    </Column>\n                    <Column flexGrow={1}>\n                        <HeaderCell>排序</HeaderCell>\n                        <Cell dataKey=\"order\"/>\n                    </Column>\n                    <Column flexGrow={3}>\n                        <HeaderCell>跳转类型</HeaderCell>\n                        <Cell dataKey=\"type\"/>\n                    </Column>\n                    <Column flexGrow={3}>\n                        <HeaderCell>跳转地址</HeaderCell>\n                        <Cell dataKey=\"pagepath\"/>\n                    </Column>\n                    <Column flexGrow={6}>\n                        <HeaderCell></HeaderCell>\n                        <ActionCell dataKey=\"id\"/>\n                    </Column>\n                </Table>\n                {\n                    this.props.total > 0 ? <Pagination\n                        lengthMenu={[\n                            {\n                                value: 10,\n                                label: 10\n                            },\n                            {\n                                value: 20,\n                                label: 20\n                            }\n                        ]}\n                        activePage={this.state.page}\n                        displayLength={20}\n                        total={this.props.total}\n                        renderTotal={() => {\n                            return <div>总数:{this.state.total}</div>\n                        }}\n                    /> : \"\"\n                }\n            </div>\n        )\n    }\n}","import {withRouter} from \"react-router\"\nimport Menu from \"../../component/menu\";\nimport {Dispatch} from \"redux\";\nimport {deleteAction, getListAction, updateAction, modifyAction} from \"../../actions/menu\";\nimport {connect} from \"react-redux\";\n\nconst mapStateToProps = (state: any) => ({\n    list: state.Menu.list,\n    total: state.Menu.total,\n    update: state.Menu.update,\n    del: state.Menu.del,\n    formValue: state.Menu.formValue\n})\n\nconst mapDispatchToProps = (dispatch: Dispatch) => ({\n    getList: (page: number, pageSize: number) => dispatch(getListAction(page, pageSize)),\n    onUpdate: (id: number, name: string, type: string) => dispatch(updateAction(id, name, type)),\n    onDel: (id: number, type: string) => dispatch(deleteAction(id, type)),\n    onModify: (formValue: any) => dispatch(modifyAction(formValue))\n})\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Menu))","import {DELETE_MENU, GET_MENU_LIST, MODIFY_MENU, UPDATE_MENU} from \"../constants/actions\";\n\nexport interface menu {\n    type: string\n    list: any,\n    total: number,\n    update: boolean,\n    del: boolean,\n    formValue: any\n}\n\n\nfunction getListAction(page: number, pageSize: number) {\n    return {\n        type: GET_MENU_LIST,\n        page,\n        pageSize,\n    }\n}\n\nfunction updateAction(id: number, name: string, editType: string) {\n    return {\n        type: UPDATE_MENU,\n        id,\n        name,\n        editType,\n    }\n}\n\nfunction deleteAction(id: number, editType: string) {\n    return {\n        type: DELETE_MENU,\n        id,\n        editType,\n    }\n}\n\nfunction modifyAction(formValue: any) {\n    return {\n        type: MODIFY_MENU,\n        formValue\n    }\n}\n\nexport {\n    getListAction,\n    updateAction,\n    deleteAction,\n    modifyAction\n}"],"sourceRoot":""}